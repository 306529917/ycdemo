<!DOCTYPE html>
<html style="height: 100%">
<head>
<meta charset="UTF-8">
<title>正则表达式</title>
<script src="https://cdn.bootcss.com/jquery/3.5.0/jquery.js"></script>
<script src="https://cdn.bootcss.com/vue/2.6.11/vue.js"></script>
<style type="text/css">
body{
	padding: 10px
}
.res{
	display: inline-block;
	margin : 0px 5px;
	width: 60px;
	height: 20px;
	line-height:20px;
}
input {
	color:blue;
	text-align: center;
	font-size: 1.2em;
	font-weight : bold;
	border-top:none;
	border-left:none;
	border-right:none;
	border-bottom : 1px solid #555;
	background: inherit;
	width:70%
}
.qlist dl{
	padding: 5px;
	border: 1px solid #ccc;
	background: #eee;
	border-radius: 5px;
}
.qlist dl:hover{
	border-color: blue;
}
.qlist{
	overflow: auto; 
}
</style>
<script type="text/javascript">
function Q(content, expect, validate, answer){
	this.content = content;
	this.validate = validate;
	this.expect = expect;
	this.answer = answer;
	this.result = false;
}

var qs = [
	new Q("var data = ['lls@qq.com', 'lls#163.com', 'lls@sina@com', 'llsqqcom', 'lls.qq@com', 'lls@yc.com'];<br>// 判断该组字符串是否是邮箱地址<br>var arr = [];<br>for(var i in data){<br> var ret = 答题线; <br> arr.push(ret);<br>}<br>arr.toString() ; // 结果返回 ",
			[true,false,false,false,false,true],null,'/\w+@\w+\.\w+/.test(data[i])'),
	new Q("var data = ['13812345678', '1381234567', '138123456789', '138a2345678', '138.2345678'];<br>// 判断该组字符串是否是手机号码<br>var arr = [];<br>for(var i in data){<br> var ret = 答题线; <br> arr.push(ret);<br>}<br>arr.toString() ; // 结果返回 ",
			[true,false,false,false,false],null,'/^\d{11}$/.test(data[i])'),
	new Q("var data = ['430403198802033031', '43040319880503303X', '43040319880203303Y', '43040319880203303', '4304031988020330305'];<br>// 判断该组字符串是否是身份证号码(18位数字,最后一位是0~9和X)<br>var arr = [];<br>for(var i in data){<br> var ret = 答题线; <br> arr.push(ret);<br>}<br>arr.toString() ; // 结果返回 ",
			[true,true,false,false,false],null,'/^\d{17}[0-9Xx]$/.test(data[i])'),
];

</script>
</head>
<body>
	<div id="main">
		<fieldset class="alist">
			<legend>正则表达式练习题2 答题结果</legend>
			<span class="res" v-for="q,i in questions">
				题{{i+1}}: <b style="color: red">{{q.result?'对':''}}</b>
			</span>
		</fieldset>
		<fieldset>
			<legend>题目: 请按照要求再横线处填写代码, 浏览器控制台会打印每道题的返回结果</legend>
			<div class="qlist">
			<dl v-for="q,i in questions" :style="{backgroundColor:q.result?'#ddd':'#eee'}">
				<dt>第{{i+1}}题 <b style="color: red">{{q.result?'对':''}}</b></dt>
				<dd>
					<span v-html="prefix( q.content )"></span>
					<input @change="test( q, $event )">
					<span v-html="suffix( q.content )"></span>
					<span v-html="q.expect != undefined ? q.expect : ''" :style="showResult(q)"></span>
				</dd>
			</dl>
			</div>
		</fieldset>
	</div>
	<script type="text/javascript">
		new Vue({
			el : "#main",
			data : {
				questions : qs
			},
			methods : {
				test(q,event){
					var value = event.srcElement.value;
					if(q.validate){
						if( ! q.validate.expr.test(value)) {
							alert(q.validate.msg);
							q.result = false;
							return;
						}
					}
					var script = q.content.replace(/<br>/gi,'\r\n');
					script = script.replace(/答题线/g,value);
					try{
						console.info("====测试开始====");
						console.info(script);
						var ret = eval(script);
						console.info("====测试结果====");
						console.info(ret);
						console.info("====测试结束====");
						q.result = q.expect != undefined ? ret == q.expect : true;
					}catch(e){
						console.error(e);
						q.result = false;
					}
				},
				prefix(text){
					return text.substring(0, text.indexOf('答题线'));
				},
				suffix(text){
					return text.substring(text.indexOf('答题线') + 3);
				},
				showResult(q){
					return {color:q.result?'green':'inherit',
							fontWeight:q.result?'bold':'inherit'}
				}
			},
			
		});
	</script>
</body>
</html>